generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id           Int      @id @default(autoincrement())
  email        String   @unique @db.VarChar(100)
  name         String
  tipo_usuario Int
  senha        String   @db.VarChar(100)
  TipoUsuario TipoUsuario @relation("user_tipo_usuario", fields: [tipo_usuario], references: [id])
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt

  @@map("user")
}

model TipoUsuario {
  id Int @id @default(autoincrement())
  type String @db.VarChar(30)
  created_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt
  User  User[] @relation("user_tipo_usuario")

  @@map("tipo_usuario")

}

model Pedido {
  id          Int      @id @default(autoincrement())
  data_Pedido DateTime @default(now())
  id_usuario  Int
  status      String
  valor_total Float
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt

  @@map("pedido")
}

model Produto {
  id               Int      @id @default(autoincrement())
  nome_produto     String
  descricao        String?
  preco            Float
  quantidade          Int
  categoria         String
  data_cadastro    DateTime @default(now())
  
  created_at       DateTime @default(now())
  updated_at       DateTime @updatedAt

  @@map("produto")
}

model Item {
  id             Int      @id @default(autoincrement())
  id_produto     Int
  id_pedido      Int
  quantidade     Int
  preco_unitario Float
  subtotal       Float
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt

  @@map("item")
}

model ItemPagamento {
  id             Int      @id @default(autoincrement())
  id_item        Int
  id_pedido      Int
  quantidade     Int
  preco_unitario Float
  subtotal       Float
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt

  @@map("item_pagamento")
}

model Pagamento {
  id               Int      @id @default(autoincrement())
  id_pedido        Int
  valor_pago       Decimal
  metodo_pagamento String
  data_pagamento   DateTime @default(now())
  status_pagamento String
  created_at       DateTime @default(now())
  updated_at       DateTime @updatedAt

  @@map("pagamento")
}

model Endereco {
  id         Int      @id @default(autoincrement())
  id_usuario Int
  cidade     String
  provincia  String
  pais       String
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("endereco")
}

model Avaliacao {
  id             Int      @id @default(autoincrement())
  id_produto     Int
  id_usuario     Int
  nota           Int
  comentario     String?
  data_avaliacao DateTime @default(now())
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt

  @@map("avaliacao")
}

model Carrinho {
  id               Int      @id @default(autoincrement())
  id_usuario       Int
  data_criacao     DateTime @default(now())
  data_atualizacao DateTime @updatedAt
  status           String
  created_at       DateTime @default(now())
  updated_at       DateTime @updatedAt

  @@map("carrinho")
}
